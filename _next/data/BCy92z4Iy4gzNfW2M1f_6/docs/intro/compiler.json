{"pageProps":{"frontmatter":{"title":"Fast, faster","description":"Breaking out of the frontend trilemma.","slug":"compiler","readingTime":{"text":"9 min read","minutes":8.26,"time":495600,"words":1652}},"code":"var Component=(()=>{var f=Object.create;var h=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var S=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),x=(t,i)=>{for(var l in i)h(t,l,{get:i[l],enumerable:!0})},g=(t,i,l,n)=>{if(i&&typeof i==\"object\"||typeof i==\"function\")for(let r of y(i))!w.call(t,r)&&r!==l&&h(t,r,{get:()=>i[r],enumerable:!(n=v(i,r))||n.enumerable});return t};var C=(t,i,l)=>(l=t!=null?f(b(t)):{},g(i||!t||!t.__esModule?h(l,\"default\",{value:t,enumerable:!0}):l,t)),T=t=>g(h({},\"__esModule\",{value:!0}),t);var N=S((z,k)=>{k.exports=_jsx_runtime});var q={};x(q,{default:()=>j,frontmatter:()=>_});var e=C(N()),_={title:\"Fast, faster\",description:\"Breaking out of the frontend trilemma.\"};function R(t={}){let{wrapper:i}=t.components||{};return i?(0,e.jsx)(i,Object.assign({},t,{children:(0,e.jsx)(l,{})})):l();function l(){let n=Object.assign({p:\"p\",strong:\"strong\",em:\"em\",code:\"code\",img:\"img\",a:\"a\",h3:\"h3\",ul:\"ul\",li:\"li\",h5:\"h5\",pre:\"pre\",div:\"div\",span:\"span\"},t.components),{TLDR:r,IntroParagraph:p,Table:c,TableCol:s,TableCell:a,YStack:d,BenchmarkChartWeb:m,BenchmarkChartNative:u}=n;return u||o(\"BenchmarkChartNative\",!0),m||o(\"BenchmarkChartWeb\",!0),p||o(\"IntroParagraph\",!0),r||o(\"TLDR\",!0),c||o(\"Table\",!0),a||o(\"TableCell\",!0),s||o(\"TableCol\",!0),d||o(\"YStack\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r,{children:(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"TLDR\"}),\": The Tamagui compiler makes sharing significantly more code between native and web feel native. It speeds up web apps 100-300%, and native 15-20%.\"]})}),`\n`,(0,e.jsx)(p,{children:(0,e.jsxs)(n.p,{children:[\"The React Native motto\",\" \",`\n`,(0,e.jsx)(\"span\",{style:{color:\"var(--yellow10)\"},children:\"learn once, write anywhere\"}),` belies a truth: apps\nonly feel as good as they use The Platform\\u2122 they deploy to.`]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"React Native's raison d\\xEAtre is to allow sharing concepts across platforms, along with \",(0,e.jsx)(n.em,{children:\"the UI that makes sense\"}),\". It does this adeptly, allowing for large parts of the non-interface logic and smaller parts of the interface itself to be unified, saving a lot of developer time.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"But as of today, there's still a large amount of interface that we don't share, but could, if only we could optimize for the web platform quite a bit better. In fact, we can do better than hand-optimization in many cases, while allowing simpler syntax!\"}),`\n`,(0,e.jsx)(n.p,{children:\"This document goes into how the Tamagui compiler achieves a good portion of that.\"}),`\n`,(0,e.jsx)(n.p,{children:\"But first, let's start with a hard choice all frontend developers have been making since nearly the beginning of software itself:\"}),`\n`,(0,e.jsxs)(c,{heading:\"Choose one\",children:[(0,e.jsxs)(s,{children:[(0,e.jsx)(a,{head:!0}),(0,e.jsx)(a,{children:\"1\"}),`\n`,(0,e.jsx)(a,{children:\"2\"}),`\n`,(0,e.jsx)(a,{children:\"3\"})]}),(0,e.jsxs)(s,{children:[(0,e.jsx)(a,{head:!0,children:\"Strategy\"}),`\n`,(0,e.jsx)(a,{children:\"Universal\"}),`\n`,(0,e.jsx)(a,{children:\"Lean\"}),`\n`,(0,e.jsx)(a,{children:\"Big-Budget\"})]}),(0,e.jsxs)(s,{children:[(0,e.jsx)(a,{head:!0,children:\"Native + Web\"}),`\n`,(0,e.jsx)(a,{children:\"\\u2705\"}),`\n`,(0,e.jsx)(a,{children:\"\\u274C\"}),`\n`,(0,e.jsx)(a,{children:\"\\u2705\"})]}),(0,e.jsxs)(s,{children:[(0,e.jsx)(a,{head:!0,children:\"Code Sharing\"}),`\n`,(0,e.jsx)(a,{children:\"> 70%\"}),`\n`,(0,e.jsx)(a,{children:\"-\"}),`\n`,(0,e.jsx)(a,{children:\"< 30%\"})]}),(0,e.jsxs)(s,{children:[(0,e.jsx)(a,{head:!0,children:\"Ship Fast\"}),`\n`,(0,e.jsx)(a,{children:\"\\u2705\"}),`\n`,(0,e.jsx)(a,{children:\"\\u2705\"}),`\n`,(0,e.jsx)(a,{children:\"\\u274C\"})]}),(0,e.jsxs)(s,{children:[(0,e.jsx)(a,{head:!0,children:\"Feels native\"}),`\n`,(0,e.jsx)(a,{children:\"\\u274C\"}),`\n`,(0,e.jsx)(a,{children:\"\\u2705\"}),`\n`,(0,e.jsx)(a,{children:\"\\u2705\"})]})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"The \",(0,e.jsx)(n.code,{children:\"Feels Native\"}),\" column is the one to pay attention to here. What's really happening here is what I've been thinking of as \",(0,e.jsx)(n.strong,{children:\"the frontend trilemma\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:'The same table above can be re-framed as a \"choose two of three\":'}),`\n`,(0,e.jsxs)(c,{heading:\"Choose two\",children:[(0,e.jsx)(s,{children:(0,e.jsx)(a,{children:\"Multi-platform\"})}),(0,e.jsx)(s,{children:(0,e.jsx)(a,{children:\"Single codebase\"})}),(0,e.jsx)(s,{children:(0,e.jsx)(a,{children:\"Feels native\"})})]}),`\n`,(0,e.jsx)(n.p,{children:\"Or, much better illustrated in a diagram:\"}),`\n`,(0,e.jsx)(d,{maw:650,als:\"center\",children:(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/trilemma.svg\",alt:`The Frontend Trilemma: Choose two of DX, UX, and multi-platform (or run out of\ntime).`})})}),`\n`,(0,e.jsx)(n.p,{children:\"This choice is as old as software, and has applied way before React ever came along. With React Native, I'd make the claim that we've made real, incremental progress towards allowing all three.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Here's a very official and indisputable graph:\"}),`\n`,(0,e.jsx)(d,{maw:650,als:\"center\",children:(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/code-sharing.svg\",alt:`Sharing code between web and native without sacrificing native feel has gone way up with the\nrelease of React Native, and later with the release of React Native Web`})})}),`\n`,(0,e.jsx)(n.p,{children:\"React Native allowed us to share more between platforms: state and logical code, utilities, and hooks (once they came out). A bit later, with React Native Web, could now share a small portion of visual components as well.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"The general trend upwards in between those two releases represents amazing work by all sorts of library authors to create smoother, better libraries and APIs in the interim - from \",(0,e.jsx)(n.a,{href:\"https://reactnavigation.org/\",children:\"React Navigation\"}),\" (and \",(0,e.jsx)(n.a,{href:\"https://solito.dev/\",children:\"Solito\"}),\"), to \",(0,e.jsx)(n.a,{href:\"https://github.com/Shopify/react-native-skia\",children:\"React Native Skia\"}),\" and \",(0,e.jsx)(n.a,{href:\"https://docs.swmansion.com/react-native-reanimated/\",children:\"Reanimated\"}),\" and really just \",(0,e.jsx)(n.a,{href:\"https://github.com/react-native-svg/react-native-svg\",children:\"all\"}),\" \",(0,e.jsx)(n.a,{href:\"https://github.com/expo/match-media\",children:\"sorts\"}),\" \",(0,e.jsx)(n.a,{href:\"https://gorhom.github.io/react-native-bottom-sheet\",children:\"of\"}),\" \",(0,e.jsx)(n.a,{href:\"https://github.com/rnmapbox/maps\",children:\"other\"}),\" \",(0,e.jsx)(n.a,{href:\"https://www.google.com/search?q=expo+linear+gradient&oq=expo+linear+gradient&aqs=chrome..69i57j69i59j69i60.3994j0j1&sourceid=chrome&ie=UTF-8\",children:\"libraries\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Yet, even with React Native Web, in the best cases it's simply impossible to share more than a pretty small fraction of your frontend without immediately sacrificing look and feel. This is mostly because the web is very sensitive to Javascript in general, and the CSS-in-JS strategy that React Native Web uses as of today basically forces all styles into JS, and doesn't give you access to primitives that browsers are highly optimized for.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Browsers really want you to use CSS for anything interactive, and React Native simply has no concept of many important CSS features that web apps need to feel great.\"}),`\n`,(0,e.jsx)(n.h3,{id:\"whats-holding-us-back\",children:\"What's holding us back\"}),`\n`,(0,e.jsx)(n.p,{children:\"For all the great things its done, there are four things React Native Web needs to do that that would each individually have a big effect on sharing code. Funny enough - the last three would also all be big DX wins for regular old React Native. They are:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Don't serve styles in Javascript.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Use CSS media queries for responsivity.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Use CSS variables for themes.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Use CSS psuedo attributes for interactive styles.\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"React Native Web makes you write your styles in Javascript, and it only supports the limited React Native \",(0,e.jsx)(n.code,{children:\"StyleSheet\"}),\" API. Unfortunately, that API is, well, limited - it has no concept of responsive styles (media queries), themes (CSS variables), or \",(0,e.jsx)(n.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes\",children:\"pseudo styling\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:\"This means that every style you write is part of your Javascript bundle. But it gets worse because some of the most important features you need to really share code are the performance sensitive - media queries, for example are essential to sharing code and are useful at almost level of your components tree. Pseudo styles and theme styles have similar profiles - very important for UX, very sensitive to performance, and very much better in CSS.\"}),`\n`,(0,e.jsx)(n.p,{children:\"And then there's the authoring experience.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Want dark and light mode? Or just a nice style when a user presses or hovers on a button? You'll need about 8 lines of code for what usually took 2 in CSS.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"The effect of the combination of all these factors is hard to understate: \",(0,e.jsx)(\"span\",{style:{color:\"var(--yellow10)\"},children:\"it's absolutely devastating for web performance\"}),\". Not to mention code quality and boilerplate.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"These downsides really work together to demoralize the naive Universal app developer. Especially if they are used to writing High Quality Web Apps. They go from writing DRY, simple, performant CSS to cumbersome, verbose and brittle styles that eat up main-thread time.\"}),`\n`,(0,e.jsx)(n.p,{children:\"But if you can't afford to develop your app twice, it's either that, or nothing.\"}),`\n`,(0,e.jsx)(n.p,{children:\"And this is nothing against React Native Web. It's simply a matter of will.\"}),`\n`,(0,e.jsx)(n.p,{children:\"And it just so happened I had a bit of time during the pandemic, and I really, really didn't want to have to choose two in the trilemma.\"}),`\n`,(0,e.jsx)(n.h3,{id:\"how-tamagui-fixes-all-that-stuff\",children:\"How Tamagui fixes all that stuff\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"The Tamagui compiler starts with the essentials: \",(0,e.jsx)(n.strong,{children:\"it extracts all your styles to CSS\"}),\". This alone leads to about 30% increases in general performance - measured in bundle size, startup time, runtime, or Lighthouse scores.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"It also gives us \",(0,e.jsx)(\"span\",{style:{color:\"var(--yellow10)\"},children:\"three features today that all optimize completely to CSS on the web\"}),\": \",(0,e.jsx)(n.strong,{children:\"responsive styles (media queries)\"}),\", \",(0,e.jsx)(n.strong,{children:\"theme values (CSS variables)\"}),\", \",(0,e.jsx)(n.strong,{children:\"interactive styling (pseudo styles)\"}),\". Each of these features were designed hand-in-hand with the compiler to extract on the web to CSS, leaving behind nothing at all but simple render functions:\"]}),`\n`,(0,e.jsx)(n.h5,{id:\"input\",children:\"Input\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"language-tsx\",children:[(0,e.jsxs)(n.div,{\"data-line\":\"1\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" Paragraph\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" YStack \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'tamagui'\"}),`\n`]}),(0,e.jsx)(n.div,{\"data-line\":\"2\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:`\n`}),(0,e.jsxs)(n.div,{\"data-line\":\"3\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-variable function\",children:\"App\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"props\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.div,{\"data-line\":\"4\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[\"  \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"YStack\"})]}),`\n    `,(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"padding\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"props\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"big \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'$5'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'$3'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n    `,(0,e.jsxs)(n.span,{className:\"token spread\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"...\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"props\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"colored \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n      backgroundColor`,(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'green'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\"}),`\n`]}),(0,e.jsxs)(n.div,{\"data-line\":\"5\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"    \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Paragraph\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"size\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"$2\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"Lorem ipsum dolor.\"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Paragraph\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\"}),`\n`]}),(0,e.jsxs)(n.div,{\"data-line\":\"6\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"  \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"YStack\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.div,{\"data-line\":\"7\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.h5,{id:\"output\",children:\"Output\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"language-tsx\",children:[(0,e.jsxs)(n.div,{\"data-line\":\"1\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" Paragraph\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" YStack\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" concatClassName \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'tamagui'\"}),`\n`]}),(0,e.jsx)(n.div,{\"data-line\":\"2\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:`\n`}),(0,e.jsxs)(n.div,{\"data-line\":\"3\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-variable function\",children:\"App\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"props\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.div,{\"data-line\":\"4\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[\"  \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"div\"]}),`\n    `,(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"className\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"concatClassName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n      _cn `,(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"props\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"big \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" _cn2 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" _cn3\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"' '\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"props\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"colored \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" _cn4 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"' '\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\"}),`\n`]}),(0,e.jsxs)(n.div,{\"data-line\":\"5\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"    \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"span\"]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"className\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"_cn5\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"Lorem ipsum dolor.\"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"span\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\"}),`\n`]}),(0,e.jsxs)(n.div,{\"data-line\":\"6\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"  \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"div\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.div,{\"data-line\":\"7\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.div,{\"data-line\":\"8\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:`\n`}),(0,e.jsxs)(n.div,{\"data-line\":\"9\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" _cn5 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"' _c-scmqyp _d-1471scf _ff-xeweqh _fs-7uzi8p _lh-1l6ykvy'\"}),`\n`]}),(0,e.jsxs)(n.div,{\"data-line\":\"10\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" _cn4 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'  _bc-1542mo4'\"}),`\n`]}),(0,e.jsxs)(n.div,{\"data-line\":\"11\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" _cn3 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"' _pb_-12bic3x _pl_-7ztw5e _pr-g6vdx7 _pt-1vq430g'\"}),`\n`]}),(0,e.jsxs)(n.div,{\"data-line\":\"12\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" _cn2 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"' _pb-z3qxl0 _pl-14km6ah _pr-1qpq1qc _pt-1medp4i'\"}),`\n`]}),(0,e.jsxs)(n.div,{\"data-line\":\"13\",className:\"highlight-line\",\"data-highlighted\":\"true\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" _cn \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"' _d-6koalj _fd-eqz5dr _fls-1q142lx '\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"For something like resizing a browser window, changing a theme, or hovering over a component, these changes have huge performance benefits. Extracting everything to CSS media queries alone (completely avoiding JS re-renders) increases browser resizing paint speed by 10x.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"And it lets us write our code naturally. No more unecessary naming and glue between \",(0,e.jsx)(n.code,{children:\"StyleSheet\"}),\" and your render function. No more worrying about peformance cliffs by inline anything you want.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Notice one really interesting thing the compiler does - it removes the \",(0,e.jsx)(n.code,{children:\"YStack\"}),\" and \",(0,e.jsx)(n.code,{children:\"Paragraph\"}),\" altogether. So not only do you get a big bump in performance from extracting to CSS at build-time, but you also net a pretty big benefit at runtime. The name for this sort of optimization is \",(0,e.jsx)(\"span\",{style:{color:\"var(--yellow10)\"},children:\"tree flattening\"}),\", and the Tamagui compiler uses \",(0,e.jsx)(n.a,{href:\"https://en.wikipedia.org/wiki/Partial_evaluation\",children:\"partial evaluation\"}),\" to ensure it can actually flatten a lot of your views.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[`With tree flattening we've been able to dramatically increase render performance on the web, above the already large gains from CSS compilation. This is a benchmark of rendering a single view that has a few \"variants.\" Typically, your app would have to render a large View with many hooks. With Tamagui, it just hands a `,(0,e.jsx)(n.code,{children:\"div\"}),\" over to React:\"]}),`\n`,(0,e.jsx)(m,{}),`\n`,(0,e.jsx)(n.p,{children:\"Meanwhile, on Native, because we can't optimize to anything beyond vanilla React Native code, the gains are less, but still impressive given you are now leveraging a huge amount of features that normally would eat up a lot of performance. Once again, tree flattening really helps make up the difference:\"}),`\n`,(0,e.jsx)(u,{}),`\n`,(0,e.jsxs)(n.p,{children:[\"You can see \",(0,e.jsx)(n.a,{href:\"/docs/intro/benchmarks\",children:\"the full Benchmarks with explanations here\"}),\".\"]}),`\n`,(0,e.jsx)(n.h3,{id:\"end\",children:\"End\"}),`\n`,(0,e.jsx)(n.p,{children:\"I think Tamagui opens to door to a new option. It will take time for it to stabilize completely, and certainly there's tons of room for improvement, but already today we've seen apps go from sharing ~25% of code, to over 70%.\"}),`\n`,(0,e.jsxs)(c,{heading:\"Choose one\",children:[(0,e.jsxs)(s,{children:[(0,e.jsx)(a,{head:!0}),(0,e.jsx)(a,{children:\"1\"}),`\n`,(0,e.jsx)(a,{children:\"2\"}),`\n`,(0,e.jsx)(a,{children:\"3\"}),`\n`,(0,e.jsx)(a,{highlight:!0,children:\"4\"})]}),(0,e.jsxs)(s,{children:[(0,e.jsx)(a,{head:!0,children:\"Strategy\"}),`\n`,(0,e.jsx)(a,{children:\"Universal\"}),`\n`,(0,e.jsx)(a,{children:\"Lean\"}),`\n`,(0,e.jsx)(a,{children:\"Big-Budget\"}),`\n`,(0,e.jsx)(a,{highlight:!0,children:\"Universal + Compiler\"})]}),(0,e.jsxs)(s,{children:[(0,e.jsx)(a,{head:!0,children:\"Native + Web\"}),`\n`,(0,e.jsx)(a,{children:\"\\u2705\"}),`\n`,(0,e.jsx)(a,{children:\"\\u274C\"}),`\n`,(0,e.jsx)(a,{children:\"\\u2705\"}),`\n`,(0,e.jsx)(a,{highlight:!0,children:\"\\u2705\"})]}),(0,e.jsxs)(s,{children:[(0,e.jsx)(a,{head:!0,children:\"Code Sharing\"}),`\n`,(0,e.jsx)(a,{children:\"> 70%\"}),`\n`,(0,e.jsx)(a,{children:\"-\"}),`\n`,(0,e.jsx)(a,{children:\"< 30%\"}),`\n`,(0,e.jsx)(a,{highlight:!0,children:\"> 75%\"})]}),(0,e.jsxs)(s,{children:[(0,e.jsx)(a,{head:!0,children:\"Ship Fast\"}),`\n`,(0,e.jsx)(a,{children:\"\\u2705\"}),`\n`,(0,e.jsx)(a,{children:\"\\u2705\"}),`\n`,(0,e.jsx)(a,{children:\"\\u274C\"}),`\n`,(0,e.jsx)(a,{highlight:!0,children:\"\\u2705\"})]}),(0,e.jsxs)(s,{children:[(0,e.jsx)(a,{head:!0,children:\"Feels native\"}),`\n`,(0,e.jsx)(a,{children:\"\\u274C\"}),`\n`,(0,e.jsx)(a,{children:\"\\u2705\"}),`\n`,(0,e.jsx)(a,{children:\"\\u2705\"}),`\n`,(0,e.jsx)(a,{highlight:!0,children:\"\\u2705\"})]})]})]})}}var j=R;function o(t,i){throw new Error(\"Expected \"+(i?\"component\":\"object\")+\" `\"+t+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return T(q);})();\n;return Component;"},"__N_SSG":true}